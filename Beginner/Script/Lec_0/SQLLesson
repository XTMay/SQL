SELECT * FROM students;
SELECT * FROM departments;
-- String (TEXT)
-- Int
-- Float
-- Date Time, Datetime
-- Bool (T/F, 1/0, Y/N)
-- Function?

-- æŸ¥è¯¢å­¦ç”Ÿå¹´é¾„ > 21çš„å§“åå’ŒGPAä¿¡æ¯
SELECT name, age, gpa
FROM students
WHERE age > 21 AND gpa > 3 AND INSTR(name, 'å°')  == 1;
-- AND name like 'å° %';


SELECT * FROM courses;
/*INSERT INTO courses (course_name, credit, schedule_time, teacher_id, department_id, is_mandatory) VALUES
('Pythonç¼–ç¨‹åŸºç¡€', 3.0, '10:00', 1, 1, 1),*/
SELECT * FROM departments;
/*INSERT INTO departments (department_name, description) VALUES
('è®¡ç®—æœºç³»', 'ä¸»è¦è¯¾ç¨‹åŒ…æ‹¬ç¼–ç¨‹ã€AIã€æ•°æ®åº“ç­‰'),*/
SELECT * FROM enrollments;
/*INSERT INTO enrollments (student_id, course_id, score, is_passed) VALUES
(1, 1, 85.5, 1)*/
SELECT * FROM students;
/*INSERT INTO students (name, age, gender, birth_date, enrolled_date, gpa, department_id) VALUES
('å°æ˜', 20, 'ç”·', '2003-04-12', '2021-09-01', 3.5, 1),*/
SELECT * FROM teachers;
/*INSERT INTO teachers (name, hire_date, salary, title) VALUES
('å¼ ä¸‰', '2015-09-01', 8500.00, 'å‰¯æ•™æˆ'),*/


-- NOT æ¡ä»¶
-- æŸ¥è¯¢æ‰€æœ‰å¹´é¾„ä¸å¤§äº22å²çš„å­¦ç”Ÿ
SELECT *
FROM students
WHERE NOT (age > 22);

-- æŸ¥è¯¢æ‰€æœ‰GPAä¸å¤§äº3.3çš„å­¦ç”Ÿ
SELECT *
FROM students
WHERE NOT gpa > 3.3;


-- BETWEEN x AND y	
-- e.g.: score BETWEEN 80 AND 90
-- æŸ¥è¯¢è–ªèµ„åœ¨ 8000 åˆ° 10000 ä¹‹é—´çš„æ•™å¸ˆå§“åå’Œè–ªèµ„
SELECT name, salary
FROM teachers
WHERE salary BETWEEN 8000 AND 10000;

-- æŸ¥æ‰¾ GPA åœ¨ 3.0 åˆ° 4.0 ä¹‹é—´çš„å­¦ç”Ÿ
SELECT *
FROM students
WHERE gpa BETWEEN 3.0 AND 4.0;

-- æŸ¥è¯¢å…¥å­¦æ—¥æœŸåœ¨ 2020 å¹´åˆ° 2022 å¹´ä¹‹é—´çš„å­¦ç”Ÿ
SELECT ?
FROM ?
WHERE ?;


-- NOT (BETWEEN x AND y	age)
-- e.g.: NOT BETWEEN 10 AND 18
-- æŸ¥æ‰¾æˆç»©ä¸åœ¨ 60 åˆ° 80 åˆ†ä¹‹é—´çš„é€‰è¯¾è®°å½•
SELECT ?
FROM ?
WHERE ?;


-- æ‰¾å‡ºå‡ºç”Ÿæ—¥æœŸä¸åœ¨ 2000 åˆ° 2003 å¹´ä¹‹é—´çš„å­¦ç”Ÿ
SELECT ?
FROM ?
WHERE ?;

-- IN (v1, v2, v3)
-- IN (x, y, z, a, v, b, c, d) ç­‰ä»·äº = x OR = y OR = z	
-- e.g.: department_id IN (1, 2, 3)
-- æŸ¥è¯¢å±äºâ€œè®¡ç®—æœºç³» (1)â€å’Œâ€œæ•°å­¦ç³» (3)â€çš„å­¦ç”Ÿ
SELECT *
FROM students
WHERE department_id IN (1, 3);

-- æŸ¥æ‰¾ç‰¹å®šæ•™å¸ˆæ•™æˆçš„è¯¾ç¨‹ï¼ˆteacher_id ä¸º 1ã€3ã€5ï¼‰
SELECT ?
FROM ?
WHERE ?;

-- NOT IN (v1, v2, v3)	 
-- NOT IN (x, y, z) ç­‰ä»·äº != x AND != y AND != z
-- e.g.: gender NOT IN ('Male', 'Other')
-- æŸ¥è¯¢ä¸åœ¨â€œå¤–è¯­ç³» (2)â€å’Œâ€œå¿ƒç†å­¦ç³» (5)â€çš„è¯¾ç¨‹
SELECT ?
FROM ?
WHERE ?;


-- IS NULL	
--  e.g.: score IS NULL
-- æŸ¥è¯¢ GPA ç¼ºå¤±çš„å­¦ç”Ÿ
SELECT ?
FROM ?
WHERE ?;

-- æŸ¥è¯¢æœªå®‰æ’æ—¶é—´çš„è¯¾ç¨‹
SELECT ?
FROM ?
WHERE ?;

-- æŸ¥è¯¢æˆç»©æœªå½•å…¥çš„é€‰è¯¾è®°å½•
SELECT ?
FROM ?
WHERE ?;

-- IS NOT NULL	
-- e.g.: name IS NOT NULL
-- æŸ¥è¯¢æ‰€æœ‰å·¥èµ„ä¸ä¸º NULL çš„æ•™å¸ˆ
SELECT ?
FROM ?
WHERE ?;

-- æŸ¥è¯¢ æœ‰GPA çš„å­¦ç”Ÿ
SELECT ?
FROM ?
WHERE ?;



-- æŸ¥è¯¢ç”Ÿæ—¥ä¸ä¸ºNULLä¸”å¹´é¾„åœ¨21å²åˆ°23å²ä¹‹é—´çš„æ‰€æœ‰å¥³ç”Ÿçš„å§“åï¼Œå¹´é¾„å’Œç”Ÿæ—¥


-- æŸ¥è¯¢æ¥è‡ªéƒ¨é—¨1çš„GPAä¸å°äº3.2çš„æˆ–GPAä¸ºNULLçš„å­¦ç”Ÿä¿¡æ¯


-- ğŸ”¢ æ•°å­¦å‡½æ•°
-- ROUND(x) 	
-- e.g.: ROUND(88.678) â†’ 89 	 å››èˆäº”å…¥
SELECT gpa, ROUND(gpa)
FROM students;

-- ABS(x) 	 
-- e.g.: ABS(-10) â†’ 10 	 ç»å¯¹å€¼

-- CEIL(x) / FLOOR(x)
-- e.g.: CEIL(3.4) â†’ 4 / FLOOR(3.4) â†’ 3 	 å‘ä¸Š / å‘ä¸‹å–æ•´

SELECT gpa, CEIL(gpa), FLOOR(gpa)
FROM students;

-- POWER(x, y) 	 
-- e.g.: POWER(2, 3) â†’ 8 	 x çš„ y æ¬¡å¹‚
SELECT POWER(2, 3)
FROM students;

-- SQRT(x) 	 
-- e.g.: SQRT(9) â†’ 3 	 å¹³æ–¹æ ¹

SELECT SQRT(9)
FROM students;

-- RANDOM() 	 
-- e.g.: RANDOM() â†’ éšæœºæ•´æ•° 	 ç”Ÿæˆéšæœºå€¼

SELECT RANDOM()
FROM students;

-- ğŸ”  å­—ç¬¦ä¸²å‡½æ•° 	 

-- LENGTH(s) 	 
-- e.g.: LENGTH('SQL') â†’ 3 	 å­—ç¬¦ä¸²é•¿åº¦

SELECT LENGTH('SQL')
FROM students;

-- UPPER(s) / LOWER(s) 	 
-- e.g.: UPPER('sql') â†’ 'SQL' 	 è½¬æ¢ä¸ºå¤§å†™ / å°å†™
SELECT UPPER('sql')
FROM students;

-- SUBSTR(s, start, len) 	 
-- e.g.: SUBSTR('SQLè¯­è¨€', 1, 3) â†’ 'SQL' 	 æˆªå–å­ä¸²
SELECT SUBSTR('SQLè¯­è¨€', 1, 3)
FROM students;

-- TRIM(s) / LTRIM() / RTRIM() 	 
-- e.g.: TRIM(' abc ') â†’ 'abc' 	 å»é™¤ç©ºæ ¼/å‰å¯¼/å°¾éƒ¨å­—ç¬¦
SELECT TRIM(' abc ')
FROM students;

-- REPLACE(s, old, new) 	 
-- e.g.: REPLACE('apple', 'a', 'A') â†’ 'Apple' 	 æ›¿æ¢å­ä¸²
SELECT REPLACE('apple', 'a', 'A')
FROM students;

-- INSTR(s, substr) 	 
-- e.g.: INSTR('hello', 'e') â†’ 2 	 æŸ¥æ‰¾å­ä¸²ä½ç½®*/
SELECT INSTR('hello', 'e')
FROM students;

SELECT * FROM courses;
/*INSERT INTO courses (course_name, credit, schedule_time, teacher_id, department_id, is_mandatory) VALUES
('Pythonç¼–ç¨‹åŸºç¡€', 3.0, '10:00', 1, 1, 1),*/
SELECT * FROM departments;
/*INSERT INTO departments (department_name, description) VALUES
('è®¡ç®—æœºç³»', 'ä¸»è¦è¯¾ç¨‹åŒ…æ‹¬ç¼–ç¨‹ã€AIã€æ•°æ®åº“ç­‰'),*/
SELECT * FROM enrollments;
/*INSERT INTO enrollments (student_id, course_id, score, is_passed) VALUES
(1, 1, 85.5, 1)*/
SELECT * FROM students;
/*INSERT INTO students (name, age, gender, birth_date, enrolled_date, gpa, department_id) VALUES
('å°æ˜', 20, 'ç”·', '2003-04-12', '2021-09-01', 3.5, 1),*/
SELECT * FROM teachers;
/*INSERT INTO teachers (name, hire_date, salary, title) VALUES
('å¼ ä¸‰', '2015-09-01', 8500.00, 'å‰¯æ•™æˆ'),*/


-- NOT æ¡ä»¶
-- æŸ¥è¯¢æ‰€æœ‰å¹´é¾„ä¸å¤§äº22å²çš„å­¦ç”Ÿ
SELECT *
FROM students
WHERE NOT (age > 22);


-- BETWEEN x AND y	
-- e.g.: score BETWEEN 80 AND 90
-- æŸ¥è¯¢è–ªèµ„åœ¨ 8000 åˆ° 10000 ä¹‹é—´çš„æ•™å¸ˆå§“åå’Œè–ªèµ„
SELECT name, salary
FROM teachers
WHERE (salary BETWEEN 8000 AND 10000);


-- NOT IN (v1, v2, v3)	 
-- NOT IN (x, y, z) ç­‰ä»·äº != x AND != y AND != z
-- e.g.: gender NOT IN ('Male', 'Other')
-- æŸ¥è¯¢ä¸åœ¨â€œå¤–è¯­ç³» (2)â€å’Œâ€œå¿ƒç†å­¦ç³» (5)â€çš„è¯¾ç¨‹

-- ğŸ”¢ æ•°å­¦å‡½æ•°
-- ROUND(x) 	
-- e.g.: ROUND(88.678) â†’ 89 	 å››èˆäº”å…¥
SELECT gpa, ROUND(gpa)
FROM students;

-- ABS(x) 	 
-- e.g.: ABS(-10) â†’ 10 	 ç»å¯¹å€¼
SELECT ABS(-1.2)
FROM students;

-- CEIL(x) / FLOOR(x)
-- e.g.: CEIL(3.4) â†’ 4 / FLOOR(3.4) â†’ 3 	 å‘ä¸Š / å‘ä¸‹å–æ•´
SELECT 'abc', CEIL(3.00001), FLOOR(3.00001)
FROM teachers;

-- POWER(x, y) 	 
-- e.g.: POWER(2, 3) â†’ 8 	 x çš„ y æ¬¡å¹‚
SELECT POWER(3, 2)
FROM students;

-- SQRT(x) 	 
-- e.g.: SQRT(9) â†’ 3 	 å¹³æ–¹æ ¹
SELECT SQRT(16)
FROM students;

-- RANDOM() 	 
-- e.g.: RANDOM() â†’ éšæœºæ•´æ•° 	 ç”Ÿæˆéšæœºå€¼
SELECT RANDOM()
FROM students;

-- ğŸ”  å­—ç¬¦ä¸²å‡½æ•° 	 

-- LENGTH(s) 	 
-- e.g.: LENGTH('SQL') â†’ 3 	 å­—ç¬¦ä¸²é•¿åº¦

SELECT LENGTH('æ–‡bbã‚‚ã˜aaãŠã†')
FROM students;

-- UPPER(s) / LOWER(s) 	 
-- e.g.: UPPER('sql') â†’ 'SQL' 	 è½¬æ¢ä¸ºå¤§å†™ / å°å†™
SELECT LOWER('SqlA') -- sqla
FROM students;

-- SUBSTR(s, start, len) -- s: target text	start: strat index, len: substring length
-- e.g.: SUBSTR('SQLè¯­è¨€', 1, 3) â†’ 'SQL' 	 æˆªå–å­ä¸²
SELECT SUBSTR('SQLè¯­è¨€SQLè¯­è¨€', 4, 2)
FROM students;

-- TRIM(s) / LTRIM() / RTRIM() 	 
-- e.g.: TRIM(' abc ') â†’ 'abc' 	 å»é™¤ç©ºæ ¼/å‰å¯¼/å°¾éƒ¨å­—ç¬¦
SELECT RTRIM(' abc ')
FROM students;


-- REPLACE(s, old, new) 	 
-- e.g.: REPLACE('apple', 'a', 'A') â†’ 'Apple' 	 æ›¿æ¢å­ä¸²
SELECT REPLACE('apple', 'p', 'P')
FROM students;

-- IN(INdex)STR(string)(s, substr) 	 
-- e.g.: INSTR('hello', 'e') â†’ 2 	 æŸ¥æ‰¾å­ä¸²ä½ç½®*/
SELECT INSTR('æŸ¥æ‰¾å­helloä¸²ä½ç½®', 'å­')
FROM students;

SELECT * 
FROM students;

-- æŸ¥æ‰¾å¹´é¾„åœ¨ 20 åˆ° 25 å²ä¹‹é—´ï¼Œä¸”æ˜¯å¥³æ€§çš„å­¦ç”Ÿ
SELECT * 
FROM students
WHERE ?;

-- æŸ¥æ‰¾å¹´é¾„å¤§äº 22 å²ï¼Œæˆ–è€…æ€§åˆ«æ˜¯ç”·æ€§çš„å­¦ç”Ÿ
SELECT * 
FROM students
WHERE ?;

-- æŸ¥æ‰¾åå­—ä»¥å­—æ¯ â€˜Aâ€™ å¼€å¤´ï¼Œæˆ–è€…å¹´é¾„å°äº 20 ä¸”æ˜¯ç”·æ€§çš„å­¦ç”Ÿ
SELECT * 
FROM students
WHERE ?;

-- æŸ¥æ‰¾æ²¡æœ‰éƒ¨é—¨æˆ–å¹´é¾„å°äº 21 çš„å­¦ç”Ÿ
SELECT * 
FROM students
WHERE ?;

-- æŸ¥æ‰¾åå­—ä¸ä¸ºç©ºï¼Œä¸”æ€§åˆ«æ˜¯ å¥³ æˆ–è€…å¹´é¾„è¶…è¿‡ 25 çš„å­¦ç”Ÿ
SELECT * 
FROM students
WHERE ?;

-- æ‰¾å‡ºåå­—ä»¥ â€˜Aâ€™ å¼€å¤´çš„å­¦ç”Ÿï¼Œå¹¶æ˜¾ç¤ºå°å†™ç‰ˆæœ¬
SELECT name, ?
FROM students
WHERE ?;

-- æŸ¥æ‰¾åå­—ä¸­æ˜¯å¦åŒ…å« â€˜liâ€™ å­å­—ç¬¦ä¸²çš„ä½ç½®
SELECT name, ? 
FROM students 
WHERE ?;

-- å°†åå­—ä¸­çš„ â€˜aâ€™ æ›¿æ¢æˆ â€˜Aâ€™
SELECT name, ?
FROM students 
WHERE ?;

-- å»é™¤åå­¦ç”Ÿå­—å‰åçš„ç©ºæ ¼å¹¶æˆªå–å­¦ç”Ÿåå­—çš„å‰3ä¸ªå­—ç¬¦
SELECT name, ?
FROM students 
WHERE ?;

-- æ‰¾å‡ºåå­—é•¿åº¦ä¸ºå¶æ•°ï¼Œä¸”æ€§åˆ«ä¸º  å¥³ çš„å­¦ç”Ÿ
SELECT * 
FROM students
WHERE ?;

-- æ‰¾å‡ºåå­—å‰3ä¸ªå­—æ¯ä¸º â€˜Aliâ€™ æˆ– â€˜Bobâ€™ çš„å­¦ç”Ÿ
SELECT * 
FROM students
WHERE ;

-- æŸ¥æ‰¾å­¦ç”Ÿä¸­å¹´é¾„å¤§äºç­‰äº 21ï¼Œä¸”å¹´é¾„çš„å¹³æ–¹æ ¹å¤§äº 4
SELECT * FROM students
WHERE ?;

SELECT * 
FROM courses;
-- æ‰¾å‡ºè¯¾ç¨‹æœ‰æŒ‡å®šè€å¸ˆä¸”æœ‰æŒ‡å®šç³»åˆ«çš„ï¼ˆè¿‡æ»¤æ‰æœ‰ NULL çš„è¯¾ç¨‹ï¼‰
SELECT * 
FROM courses
WHERE  ?;

--





-- å­¦ç”Ÿéƒ¨é—¨ID = 3 çš„å­¦ç”Ÿä¿¡æ¯
SELECT *
FROM students
WHERE department_id = 3;



-- å­¦ç”Ÿå¹´é¾„ > 21 å’Œ éƒ¨é—¨ID = 3 çš„å­¦ç”Ÿä¿¡æ¯ ï¼ˆANDï¼‰
SELECT *
FROM students
WHERE age > 21 AND department_id = 3;

-- å­¦ç”Ÿå¹´é¾„ > 21 æˆ–è€… æ˜¯å¥³ç”Ÿçš„æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ ï¼ˆORï¼‰
SELECT *
FROM students
WHERE age > 21 OR gender = "å¥³";
-- æŸ¥è¯¢æ‰€æœ‰å¥³ç”Ÿæˆç»©ï¼ˆGPAï¼‰å¤§äº3.1æˆ–è€…ç”·ç”Ÿçš„æˆç»©å°äº3çš„æ‰€æœ‰ä¿¡æ¯
SELECT *
FROM students
WHERE gender = "å¥³" AND gpa > 3.1
OR gender = "ç”·" AND gpa < 3.0;

--é¢˜ç›® 4ï¼šæŸ¥è¯¢æ¥è‡ª Computer Science ç³»éƒ¨ï¼Œä¸”å¹´é¾„ä¸å°äº 21 å²çš„å­¦ç”Ÿ
/*Step 1ï¼ˆæ‰¾åˆ°ç›¸å…³çš„è¡¨ï¼‰:  å­¦ç”Ÿ
Step 2ï¼ˆæ‰¾åˆ°ç›¸å…³çš„æ¡ä»¶ï¼Œåˆ†ææ¡ä»¶ä¹‹é—´çš„å…³ç³»ï¼‰: Department_name = Computer AND Science age > 21
Step 3 ï¼ˆæœ€ç»ˆè¦æŸ¥è¯¢çš„ä¿¡æ¯ï¼ˆåˆ—åï¼‰ï¼Œæ²¡æœ‰æŒ‡å®šï¼Œè¿”å›æ‰€æœ‰ä¿¡æ¯ *ï¼‰: *ï¼Œ column name*/
SELECT *
FROM students
WHERE ?;


SELECT age, name
FROM students
WHERE name LIKE '.a%';

-- ä¸åŒçš„æ¡ä»¶æ–¹æ³•å¯ä»¥å®ç°ä¸åŒçš„æŸ¥è¯¢ç»“æœï¼Œä½†æ˜¯æ€§èƒ½ï¼ˆperformanceï¼‰å´ä¸ä¸€æ ·
SELECT age, name, department_id
FROM students
WHERE department_id IN (3, 4, 5);


SELECT age, name, department_id
FROM students
WHERE department_id = 3 OR department_id = 4 OR department_id = 5;

SELECT age, name
FROM students
WHERE student_id = 1003 OR student_id = 1004;

-- Create a table ï¼ˆåˆ›å»ºä¸€å¼ è¡¨ï¼‰

INSERT INTO students (
                         student_id,
                         name,
                         gender,
                         age,
                         department_id
                     )
                     VALUES (
                         '1005',
                         'Alice',
                         'Female',
                         '18',
                         '2'
                     );

SELECT *
  FROM students;

SELECT *
  FROM courses;

SELECT *
  FROM teachers;

-- 1. æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿçš„ GPA ä»¥åŠå››èˆäº”å…¥åçš„ GPAï¼ˆä¿ç•™ 1 ä½å°æ•°ï¼‰ã€‚-- ROUND(gpa, 1)
SELECT st.name,
       st.gpa,
       cr.department_id
  FROM students AS st
       JOIN
       courses AS cr ON st.department_id = cr.department_id;-- 2. æ˜¾ç¤ºæ¯ä½æ•™å¸ˆçš„è–ªèµ„å·®å€¼ï¼ˆä»¥ 7000 ä¸ºåŸºå‡†ï¼‰ä¸ç»å¯¹å€¼ã€‚
-- ABS(salary - 9000)
SELECT name,
       salary,
       9000 - 7000 AS diff
  FROM teachers;-- 3. æ˜¾ç¤ºæ‰€æœ‰è¯¾ç¨‹çš„å­¦åˆ†ï¼Œå‘ä¸Šå–æ•´å’Œå‘ä¸‹å–æ•´ã€‚
-- CEIL(credit)-- FLOOR(credit)
SELECT gpa,
       CEIL(gpa) AS ceil_gpa,
       FLOOR(gpa) AS floor_gpa
  FROM students;-- 4. æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹çš„å­¦åˆ†çš„å¹³æ–¹ä¸å¹³æ–¹æ ¹ã€‚
-- POWER(credit, 2)-- SQRT(credit)
SELECT gpa,
       POWER(gpa, 2) 
  FROM students;

SELECT salary,
       SQRT(salary) 
  FROM teachers;-- ORDER BY æ’åº
-- LIMIT é™åˆ¶ è¿”å› 1ï¼Ÿæ¡æ•°æ®-- 5. éšæœºè¿”å›ä»»æ„ä¸€ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ã€‚
SELECT *
  FROM students
 ORDER BY RANDOM() 
 LIMIT 3;-- ğŸ”¤ å­—ç¬¦ä¸²å‡½æ•°ç±»
-- 6. æ˜¾ç¤ºæ‰€æœ‰æ•™å¸ˆå§“ååŠå…¶é•¿åº¦ã€‚-- LENGTH(name)
SELECT course_name,
       LENGTH(course_name) 
  FROM courses
 WHERE LENGTH(course_name) > 4;-- 7. æ˜¾ç¤ºæ‰€æœ‰ç³»åˆ«åç§°çš„å¤§å†™ä¸å°å†™å½¢å¼ã€‚
-- UPPER(department_name)-- LOWER(department_name)
SELECT course_name,
       UPPER(course_name) AS upper_name,
       LOWER(course_name) AS lower_name
  FROM courses;-- 8. æ˜¾ç¤ºè¯¾ç¨‹åç§°çš„å‰ä¸¤ä¸ªå­—ã€‚
-- SUBSTR(course_name, 1, 2)
SELECT course_name,
LENGTH(course_name),
       LENGTH(course_name) - 1,
       SUBSTR(course_name, , 2) 
  FROM courses;
  

-- 9. æ˜¾ç¤ºå»é™¤å­¦ç”Ÿå§“åä¸¤ä¾§ç©ºæ ¼åçš„ç»“æœã€‚
-- TRIM(name), LTRIM(name), RTRIM(name)
SELECT name, TRIM(name), LTRIM(name), RTRIM(name)
FROM students;

-- 10. æ˜¾ç¤ºè¯¾ç¨‹åç§°ï¼Œå°† â€œç¼–ç¨‹â€ æ›¿æ¢ä¸º â€œç¨‹åºâ€ã€‚
-- REPLACE(course_name, 'ç¼–ç¨‹', 'ç¨‹åº')
-- em[ty -> "R"
SELECT name, REPLACE(name, ' ', 'R')
FROM students;

SELECT course_name, REPLACE(course_name, 'ç¼–ç¨‹', 'ç¨‹åº')
FROM courses;
   
-- 11. æ˜¾ç¤ºè¯¾ç¨‹åç§°ä¸­â€œå­¦â€å­—é¦–æ¬¡å‡ºç°çš„ä½ç½®ã€‚
-- INSTR(course_name, 'å­¦')
SELECT course_name,INSTR(course_name, 'å¯¼')
FROM courses;


-- ORDERBY, LIMIT
/*
BETWEEN x AND y
NOT BETWEEN x AND y
IN (v1)
NOT IN (v1, v2, v3)
IS NULL
IS NOT NULL
NOT æ¡ä»¶
 ROUND(x)
 ABS(x) 
 CEIL(3.142) = 4.0 / FLOOR(3.142) = 3.0
 POWER(x, y) 
 SQRT(x) 
 RANDOM() 
 LENGTH(s) 
 UPPER(s) / LOWER(s) 
 SUBSTR(s, start, len) -- index: 1 
 TRIM("    ooooo   ") / LTRIM() / RTRIM() 
 REPLACE(s, old, new) 
 INSTR(s, substr) -- index, 0
 */

-- æŸ¥æ‰¾å¹´é¾„åœ¨ 20 åˆ° 25 å²ä¹‹é—´ï¼Œä¸”æ˜¯å¥³æ€§çš„å­¦ç”Ÿ
--Find students aged between 20 and 25, and who are female

SELECT * 
FROM students
WHERE age BETWEEN 20 AND 25
  AND gender = 'å¥³';


-- æŸ¥æ‰¾å¹´é¾„å¤§äº 22 å²ï¼Œæˆ–è€…æ€§åˆ«æ˜¯ç”·æ€§çš„å­¦ç”Ÿ
-- Find students older than 22, or male students

SELECT * 
FROM students
WHERE age > 22 
   OR gender = 'ç”·';


-- æŸ¥æ‰¾åå­—ä»¥ â€˜Aâ€™ å¼€å¤´ï¼Œæˆ–è€…ï¼ˆå¹´é¾„å°äº 20 ä¸”æ€§åˆ«ä¸ºç”·æ€§ï¼‰çš„å­¦ç”Ÿ 
-- Find students whose names start with â€˜Aâ€™, or (age < 20 and gender = male)

SELECT * 
FROM students
WHERE name LIKE 'A%' 
   OR (age < 20 AND gender = 'ç”·');


-- æŸ¥æ‰¾æ²¡æœ‰éƒ¨é—¨ï¼Œæˆ–å¹´é¾„å°äº 21 å²çš„å­¦ç”Ÿ
-- Find students with no department OR whose age is less than 21

SELECT * 
FROM students
WHERE department_id IS NULL 
   OR age < 21;


-- æŸ¥æ‰¾åå­—ä¸ä¸ºç©ºï¼Œä¸”ï¼ˆæ€§åˆ«æ˜¯å¥³ æˆ– å¹´é¾„å¤§äº25ï¼‰ çš„å­¦ç”Ÿ
-- Find students whose name is not null, and (gender is female OR age > 25)

SELECT * 
FROM students
WHERE name IS NOT NULL 
  AND (gender = 'å¥³' OR age > 25);


-- æ‰¾å‡ºåå­—ä»¥ â€˜Aâ€™ å¼€å¤´ä¸”é•¿åº¦ä¸º 2 çš„å­¦ç”Ÿ
-- Find students whose names start with â€˜Aâ€™ and have exactly 2 letters
-- PRAGMA case_sensitive_like = OFF;
-- GLOB *

/* SUBSTR(s, start, len) -- index: 1 
 TRIM("    ooooo   ") / LTRIM() / RTRIM() 
 REPLACE(s, old, new) 
 INSTR(s, substr) -- index, 0*/

SELECT *
FROM students
WHERE = '1' AND LENGTH(name) = 2;


-- æŸ¥æ‰¾åå­—ä¸­åŒ…å« â€˜liâ€™ çš„ä½ç½®ï¼ˆå­—ç¬¦ä¸²ä½ç½®ï¼‰
-- Find the position of substring â€˜liâ€™ in each studentâ€™s name
-- the name contains 'e' position > 2 
SELECT name, INSTR(name, 'e')
FROM students
WHERE INSTR(name, 'e') > 2;


/* LENGTH(s) 
 UPPER(s) / LOWER(s) 
 SUBSTR(s, start, len) -- index: 1 
 TRIM("    ooooo   ") / LTRIM() / RTRIM() 
 REPLACE(s, old, new) 
 INSTR(s, substr) -- index, 0*/
-- å°†åå­—ä¸­çš„å°å†™ â€˜aâ€™ æ›¿æ¢æˆå¤§å†™ â€˜Aâ€™
-- Replace lowercase â€˜aâ€™ with uppercase â€˜Aâ€™ in student names

SELECT name, REPLACE(name, 'a', 'A')
FROM students;


-- å»é™¤åå­—å‰åç©ºæ ¼ï¼Œå¹¶æˆªå–å‰3ä¸ªå­—ç¬¦
-- Trim whitespace and get the first 3 characters of the name

SELECT name, SUBSTR(TRIM(name), 1, 3)
FROM students;

-- æ‰¾å‡ºåå­—é•¿åº¦ä¸ºå¶æ•°ï¼Œä¸”æ€§åˆ«ä¸ºå¥³çš„å­¦ç”Ÿ
-- Find students with even-length names and who are female

SELECT * 
FROM students
WHERE LENGTH(name) % 2 = 0 AND gender = 'å¥³';

-- æ‰¾å‡ºåå­—å‰ä¸‰ä¸ªå­—æ¯æ˜¯ â€˜Aliâ€™ æˆ– â€˜Bobâ€™ çš„å­¦ç”Ÿ
-- Find students whose names start with â€˜Aliâ€™ or â€˜Bobâ€™

SELECT * 
FROM students
WHERE (name LIKE 'Ali%') OR (name LIKE 'Bob%');

-- æŸ¥æ‰¾å¹´é¾„å¤§äºç­‰äº 21ï¼Œä¸”å¹´é¾„çš„å¹³æ–¹æ ¹å¤§äº 4 çš„å­¦ç”Ÿ
-- Find students age â‰¥ 21 AND whose square root of age > 4

SELECT * 
FROM students
WHERE age >= 21 AND SQRT(age) > 4;



--------------------DateTime--------------------
-- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯  
-- Query all student information  
SELECT * FROM students;

-- æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹ä¿¡æ¯  
-- Query all course information  
SELECT * FROM courses;

-- æŸ¥è¯¢æ‰€æœ‰æ•™å¸ˆä¿¡æ¯  
-- Query all teacher information  
SELECT * FROM teachers;

-- birth_date, enrolled_date -- å½“å‰æ—¥æœŸ  
-- birth_date, enrolled_date -- DATE('now') means todayâ€™s date

/*  
æ—¥æœŸ/æ—¶é—´å‡½æ•°æ¼”ç¤º  
Date/Time function usage examples  
*/
-- å½“å‰æ—¥æœŸ/æ—¶é—´  
-- Current date/time  
SELECT DATE('now');  
SELECT TIME('now'); 
SELECT DATETIME('now');

-- æå–æ—¶é—´ç»„ä»¶  
-- Extract components from date  
SELECT STRFTIME('%Y', 'now');   -- å¹´ Year  
SELECT STRFTIME('%m', 'now');   -- æœˆ Month  
SELECT STRFTIME('%d', 'now');   -- æ—¥ Day  
SELECT STRFTIME('%H', 'now');   -- å°æ—¶ Hour  
SELECT STRFTIME('%M', 'now');  -- åˆ†é’Ÿ Minute  
SELECT STRFTIME('%S', 'now');  -- ç§’ Second  
SELECT STRFTIME('%w', 'now');  -- æ˜ŸæœŸå‡  Weekday (0=Sunday)  
SELECT STRFTIME('%j', 'now');  -- ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤© Day of year  
SELECT STRFTIME('%W', 'now');  -- ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨ Week number

-- æ—¥æœŸåç§»æ“ä½œ  
-- Date offset examples  
SELECT DATE('now', '+1 day'); 
SELECT DATE('now', '-7 day'); 
SELECT DATETIME('now', '+3 hours', '-15 minutes');
SELECT DATE('2025-01-01', '+1 month');
SELECT DATE('2025-01-01', '+1 year', '-1 day');
SELECT JULIANDAY('now');

-- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å§“åå’Œå‡ºç”Ÿå¹´ä»½ï¼ˆä» birth_date æå–å¹´ï¼‰  
-- Query all student names and extract birth year  
SELECT name, ? 
FROM students;

-- æŸ¥è¯¢æ‰€æœ‰ä»Šå¤©æ³¨å†Œçš„å­¦ç”Ÿ  
-- Query students enrolled today  
SELECT name, enrolled_date  
FROM students  
WHERE ?;

-- æŸ¥è¯¢æœ€è¿‘ 7 å¤©å†…æ³¨å†Œçš„å­¦ç”Ÿ  
-- Students enrolled in the past 7 days  
SELECT name, enrolled_date  
FROM students  
WHERE ?;

-- æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹çš„æŒç»­å¤©æ•°  
-- Duration of each course (days since created_at)  
SELECT course_name, created_at, ?
FROM courses;

-- æŸ¥è¯¢å‡ºç”Ÿåœ¨ 2000 å¹´åçš„å­¦ç”Ÿ  
-- Students born after 2000  
SELECT name, birth_date  
FROM students  
WHERE ?;

-- æŸ¥è¯¢å­¦ç”Ÿæ³¨å†Œå¹´æœˆï¼ˆæ ¼å¼ 2025-07ï¼‰  
-- Show student enrollment month in 'YYYY-MM' format  
SELECT name, ?
FROM students;

-- æŸ¥è¯¢æ³¨å†Œæ—¶é—´æ˜¯ä¸Šåˆçš„å­¦ç”Ÿ  
-- Students who registered in the morning (00:00â€“11:59)  
-- CAST(xxxx AS INTEGER)
SELECT name, ? 
FROM students  
WHERE ?;

-- æŸ¥è¯¢åœ¨å‘¨æœ«æ³¨å†Œçš„å­¦ç”Ÿ  
-- Students who registered on weekend (Saturday or Sunday)  
-- 0=Sunday, 6=Saturday
SELECT name, enrolled_date, ?  
FROM students  
WHERE ?;  

-- æŸ¥è¯¢å‡ºç”Ÿæœˆä»½ä¸º 6 æœˆçš„å­¦ç”Ÿ  
-- Students born in June  
SELECT name, birth_date  
FROM students  
WHERE ?;

-- æŸ¥è¯¢æ³¨å†Œè·ä»Šå¤©çš„å¤©æ•°  
-- Days since enrollment  
SELECT name, enrolled_date,  
       ?  
FROM students;

-- æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹çš„ç»“æŸæ—¶é—´å»¶å 7 å¤©åçš„æ—¥æœŸ  
-- Course end date extended by 7 days  
SELECT course_name, created_at, ? 
FROM courses;

-- æŸ¥è¯¢è¯¾ç¨‹å¼€å§‹å 1 ä¸ªæœˆ 14 å¤©çš„æ—¥æœŸ  
-- Course date after 1 month and 14 days  
SELECT course_name, created_at,  
       ?  
FROM courses;

-- æŸ¥è¯¢å¹´é¾„å‡åºæ’åˆ—çš„å‰ 5 ä¸ªå­¦ç”Ÿ  
-- Top 5 youngest students  
SELECT name, age  
FROM students;

-- æŸ¥è¯¢è¯¾ç¨‹è¡¨ä¸­æœ€è¿‘åˆ›å»ºçš„è®°å½•  
-- Most recently created courses  
SELECT course_id, DATETIME(created_at) AS created_at  
FROM courses;

SELECT *
  FROM students;

SELECT *
  FROM courses;

SELECT *
  FROM teachers;

-- birth_date, enrolled_date-- DATE('now')

/*DATE('now')
TIME('now')
DATETIME('now')
STRFTIME('%Y', 'now')
STRFTIME('%m', 'now')
STRFTIME('%d', 'now')
STRFTIME('%H', 'now')
STRFTIME('%M', 'now')
STRFTIME('%S', 'now')
STRFTIME('%w', 'now')
STRFTIME('%j', 'now')
STRFTIME('%W', 'now')*/

/*DATE('now', '+1 day')
DATE('now', '-7 day')
DATETIME('now', '+3 hours', '-15 minutes')
DATE('2025-01-01', '+1 month')
DATE('2025-01-01', '+1 year', '-1 day')*/

SELECT DATETIME('now') 
  FROM students;-- STRFTIME('%Y', 'now')

SELECT STRFTIME('%Y', 'now') 
  FROM students;-- STRFTIME('%m', 'now')

SELECT STRFTIME('%m', 'now') 
  FROM students;-- STRFTIME('%d', 'now')

SELECT STRFTIME('%d', 'now') 
  FROM students;-- JULIANDAY('now')

SELECT JULIANDAY('now') 
  FROM students;

-- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å§“åå’Œå‡ºç”Ÿå¹´ä»½ï¼ˆä» birth_date æå–å¹´ï¼‰
-- STRFTIME('%Y', birth_date)
SELECT name
FROM students;

-- æŸ¥è¯¢æ‰€æœ‰ä»Šå¤©æ³¨å†Œçš„å­¦ç”Ÿï¼ˆenrolled_at æ˜¯ä»Šå¤©ï¼ˆDATE('now')ï¼‰ï¼‰
SELECT name, enrolled_at
FROM students
WHERE DATE(enrolled_date);

--  æŸ¥è¯¢æœ€è¿‘ 7 å¤©å†…æ³¨å†Œçš„å­¦ç”Ÿ
-- DATE('now', '-7 days')
SELECT name, enrolled_date
FROM students
WHERE DATE(enrolled_date);

-- æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹æŒç»­å¤©æ•°ï¼ˆnow - created_atï¼‰
-- JULIANDAY(date)
SELECT course_name, JULIANDAY('now') - JULIANDAY(created_at)
FROM courses;

-- æŸ¥è¯¢å‡ºç”Ÿåœ¨ 2000 å¹´åçš„å­¦ç”Ÿ
-- DATE('2000-01-01')
SELECT name, birth_date
FROM students
WHERE birth_date;

-- æŸ¥è¯¢å­¦ç”Ÿçš„æ³¨å†Œæœˆä»½ï¼ˆæ ¼å¼ï¼š2025-07ï¼‰
-- STRFTIME('%Y-%m', enrolled_date)
SELECT name
FROM students;

-- æŸ¥è¯¢æ³¨å†Œæ—¶é—´æ˜¯æ—©ä¸Šï¼ˆä¸Šåˆ 12 ç‚¹åˆ° 11 ç‚¹ï¼‰çš„å­¦ç”Ÿ
-- STRFTIME('%H', enrolled_at)
SELECT name, STRFTIME('%H', enrolled_date) AS hour
FROM students
WHERE CAST(STRFTIME('%H', enrolled_date) AS INTEGER) BETWEEN 0 AND 11;

-- æŸ¥è¯¢åœ¨å‘¨æœ«ï¼ˆå‘¨å…­æˆ–å‘¨æ—¥ï¼‰æ³¨å†Œçš„å­¦ç”Ÿ
SELECT name, enrolled_date, STRFTIME('%w', enrolled_date) AS weekday
FROM students
WHERE STRFTIME('%w', enrolled_date) IN ('0', '6');  -- 0 = Sunday, 6 = Saturday

-- æŸ¥è¯¢å‡ºç”Ÿæ—¥æœŸåœ¨æ¯å¹´ 6 æœˆä»½çš„å­¦ç”Ÿ
SELECT name, birth_date
FROM students
WHERE STRFTIME('%m', birth_date) = '06';

--  æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿæ³¨å†Œè·ä»Šå¤©çš„å¤©æ•°
SELECT name, enrolled_date, 
       CAST(JULIANDAY('now') - JULIANDAY(enrolled_date) AS INTEGER) AS days_since_enroll
FROM students;


-- æŸ¥è¯¢æ¯é—¨è¯¾ç¨‹çš„ç»“æŸæ—¶é—´å»¶å 7 å¤©åçš„æ—¥æœŸ
SELECT course_name, created_at, DATE(created_at, '+7 days') AS extended_end
FROM courses;

-- æŸ¥è¯¢è¯¾ç¨‹èµ·å§‹å 1 ä¸ªæœˆã€2 å‘¨çš„ä¸Šè¯¾æ—¥æœŸ
SELECT course_name, created_at,
       DATE(created_at, '+1 month', '+14 days') AS next_class_date
FROM courses;

-- ORDERBY, LIMIT
-- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ï¼Œå¹¶æŒ‰å¹´é¾„å‡åºæ’åˆ—ï¼Œåªæ˜¾ç¤ºå‰ 5 ä½ï¼š

SELECT name, age
FROM students
ORDER BY age ASC
LIMIT 5;

 -- æŸ¥è¯¢è¯¾ç¨‹è¡¨ä¸­æœ€è¿‘åˆ›å»ºçš„è®°å½• 
SELECT course_id, DATETIME(created_at) AS created_at 
FROM courses
ORDER BY created_at DESC 
LIMIT 5;


-- Practice for test
-- æŸ¥è¯¢å¹´é¾„åœ¨ 18 åˆ° 22 å²ä¹‹é—´çš„å­¦ç”Ÿå§“åå’Œå¹´é¾„

SELECT 
FROM students 
WHERE ;

-- æŸ¥è¯¢ä¸åœ¨ 18 åˆ° 22 å²ä¹‹é—´çš„å­¦ç”Ÿå§“åå’Œå¹´é¾„

SELECT name, age
FROM students 
WHERE ;


-- 1. æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å¤§äº 18 ä¸”å°äºç­‰äº 25 å²çš„å­¦ç”Ÿå§“åå’Œå¹´é¾„ï¼Œå¹¶å°†å§“åè½¬æ¢ä¸ºå¤§å†™æ˜¾ç¤ºï¼š

SELECT 
FROM students
WHERE ;

-- 2. æŸ¥è¯¢å¹´é¾„ä¸æ˜¯ 20 æˆ– 22 å²ï¼Œä¸”æ€§åˆ«ä¸º â€˜å¥³â€™ çš„å­¦ç”Ÿå§“åå’Œå¹´é¾„ï¼š

SELECT
FROM students
WHERE ;

-- 3. æŸ¥è¯¢å­¦ç”Ÿè¡¨ä¸­æ‰€æœ‰å§“åä¸ä¸º NULLï¼Œä¸”å§“åé•¿åº¦å¤§äº 3 çš„å­¦ç”Ÿï¼š

SELECT 
FROM students
WHERE ;

-- 4. æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹åˆ†æ•°ä¸ºè´Ÿæ•°æˆ–å¤§äº 100 çš„è®°å½•ï¼Œå¹¶æ˜¾ç¤ºå…¶ç»å¯¹å€¼ï¼ˆç”¨äºè¯†åˆ«å¼‚å¸¸åˆ†æ•°ï¼‰ï¼š

SELECT 
FROM enrollments
WHERE ;

-- 5. æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å§“åï¼Œå¹¶å°†å…¶é¦–å­—æ¯å¤§å†™ï¼ˆä»… SQLite æ”¯æŒ substr()ï¼‰ï¼š

SELECT 
FROM students
WHERE ;

-- 6. æŸ¥è¯¢å¹´é¾„ä¸ºå¶æ•°çš„å­¦ç”Ÿï¼Œå¹¶æ˜¾ç¤ºå…¶å¹´é¾„çš„å¹³æ–¹å€¼ï¼š

SELECT
FROM students
WHERE ;

-- 7. æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å§“åå’Œå½“å‰æ—¥æœŸï¼š

SELECT 
FROM ;

-- 8. æŸ¥è¯¢å­¦ç”Ÿè¡¨ä¸­æ‰€æœ‰ç”·ç”Ÿä¸”å¹´é¾„åœ¨ 20 ~ 30 å²ä¹‹é—´ï¼Œå§“åé•¿åº¦åœ¨ 3 åˆ° 5 ä¹‹é—´çš„å­¦ç”Ÿï¼š

SELECT 
FROM students
WHERE ;

-- 9. æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å¹´é¾„ä¸ 2025 å¹´çš„å·®å€¼ï¼ˆå‡è®¾å‡ºç”Ÿå¹´ä»½ä¸º 2025 - ageï¼‰ï¼š

SELECT 
FROM students;

-- 10. æŸ¥è¯¢æˆç»©å°äº 60 ä¸”ä¸ä¸º NULL çš„å­¦ç”Ÿæˆç»©ï¼Œå¹¶ä¿ç•™ 1 ä½å°æ•°ï¼š

SELECT 
FROM enrollments
WHERE ;

-- 11. æŸ¥è¯¢æ‰€æœ‰å¥³ç”Ÿï¼ˆgender = â€˜Fâ€™ï¼‰ï¼Œå…¶å§“åä¸åŒ…å«ç©ºæ ¼ï¼Œä¸”å§“åé•¿åº¦å°äºç­‰äº 6ï¼š

SELECT n
FROM students
WHERE ;

-- 12. æŸ¥è¯¢æ‰€æœ‰å¹´é¾„ä¸ºå¥‡æ•°çš„å­¦ç”Ÿï¼Œå¹¶æ˜¾ç¤ºå¹´é¾„çš„å¹³æ–¹æ ¹ï¼ˆä¿ç•™ 2 ä½å°æ•°ï¼‰ï¼š

SELECT 
FROM students
WHERE ;

-- 13. æŸ¥è¯¢æ‰€æœ‰å§“æ°æ˜¯â€œWangâ€çš„å­¦ç”Ÿï¼ˆå‡è®¾å§“æ°ä¸ºå§“åå‰4ä¸ªå­—æ¯ï¼‰ï¼Œå¹¶å°†å§“æ°æ›¿æ¢ä¸ºâ€œå°ç‹â€ï¼š

SELECT 
FROM students
WHERE ;

-- 14. æŸ¥è¯¢æ‰€æœ‰é€‰è¯¾è®°å½•ä¸­ï¼Œåˆ†æ•°å­—æ®µä¸ºç©ºæˆ–ä¸ºè´Ÿå€¼çš„è®°å½•ï¼ˆç”¨äºæ’æŸ¥é—®é¢˜æ•°æ®ï¼‰ï¼š

SELECT 
FROM enrollments
WHERE ;

-- 15. æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ä¸­å¹´é¾„ä¸æ˜¯ 18ã€19ã€20ï¼Œå¹¶ä¸”å§“åä¸æ˜¯ NULL çš„å­¦ç”Ÿå§“åå’Œå¹´é¾„ï¼š

SELECT 
FROM students
WHERE ;

-- 16. æŸ¥è¯¢è¯¾ç¨‹ç¼–å·åœ¨ 100 åˆ° 199 ä¹‹é—´ï¼Œä¸”ä¸å±äº department_id ä¸º 3 æˆ– 5 çš„è¯¾ç¨‹ï¼š

SELECT course_id, department_id
FROM courses
WHERE ;

-- 17. æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å§“åï¼Œå¹¶ç§»é™¤é¦–å°¾ç©ºæ ¼ï¼ˆä½¿ç”¨ TRIMï¼‰åå†è½¬æ¢ä¸ºå¤§å†™ï¼š

SELECT 
FROM students;

-- 18. æŸ¥è¯¢æ‰€æœ‰æ•™å¸ˆçš„ IDï¼Œå¹¶ä½¿ç”¨ POWER å‡½æ•°æ˜¾ç¤ºå…¶ ID çš„ç«‹æ–¹å€¼ï¼ˆä¾‹å¦‚ idÂ³ï¼‰ï¼š

SELECT 
FROM teachers;

-- 19. æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå¹´é¾„ï¼Œæ˜¾ç¤ºå…¶ä¸Šå–æ•´ä¸ä¸‹å–æ•´çš„ç»“æœï¼ˆCEIL / FLOORï¼‰ï¼š

SELECT age
FROM students;

-- 20. æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå§“åï¼Œå¹¶æ˜¾ç¤ºåå­—ä¸­æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸² â€œleeâ€ï¼ˆè¿”å›ä½ç½®ï¼‰ï¼š

SELECT name
FROM students;

-- 21. æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹ä¿¡æ¯ï¼Œå¹¶ç”¨ RANDOM() ç”Ÿæˆä¸€ä¸ªæ¨¡æ‹Ÿè¯„åˆ†å­—æ®µ(mock_score)ï¼š

SELECT course_id, teacher_id
FROM courses;

-- 22. æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å§“åå’Œæ³¨å†Œå½“å¤©çš„æ—¥æœŸã€æ—¶é—´ï¼ˆDATETIMEï¼‰ï¼š

SELECT name
FROM students;

-- 23. æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å§“åã€å‡ºç”Ÿå¹´ä»½ï¼ˆå‡è®¾ä»Šå¹´æ˜¯ 2025ï¼‰ï¼Œå¹¶ä½¿ç”¨ STRFTIME æå–å½“å‰æœˆä»½ï¼š

SELECT name
FROM students;


-- 24. æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿä¸­å¹´é¾„åœ¨ 22 åˆ° 25 ä¸”ä¸ç­‰äº 23 å²çš„å­¦ç”Ÿï¼ŒæŒ‰å§“åé•¿åº¦å€’åºæ’åˆ—ï¼š

SELECT *
FROM students;

-- ç»Ÿè®¡æ¯ä¸ªç³»çš„å­¦ç”Ÿäººæ•°	
	SELECT department_id, COUNT(student_id) AS student_count
	FROM students
	GROUP BY department_id;
	
	
-- ç»Ÿè®¡æ¯ä¸ªæ€§åˆ«çš„äººæ•°	
	SELECT gender, COUNT(*) AS count
	FROM students
	GROUP BY gender;
	
	
-- ç»Ÿè®¡å„è¯¾ç¨‹çš„å¹³å‡åˆ†æ•°	
	SELECT course_id, AVG(score) AS avg_score
	FROM enrollments
	GROUP BY course_id;
	
	
-- ç»Ÿè®¡æ¯é—¨è¯¾çš„æœ€ä½å’Œæœ€é«˜æˆç»©	
	SELECT course_id, MIN(score) AS min_score, MAX(score) AS max_score
	FROM enrollments
	GROUP BY course_id;
	
	
-- ç»Ÿè®¡æ¯ä¸ªè€å¸ˆæ•™æˆçš„è¯¾ç¨‹æ•°é‡	
	SELECT teacher_id, COUNT(*) AS course_count
	FROM courses
	GROUP BY teacher_id;
	
	
-- ç»Ÿè®¡æ¯ä¸ªç³»å¹´é¾„å¤§äº20å²çš„å­¦ç”Ÿäººæ•°	
	SELECT department_id, COUNT(*) AS count
	FROM students
	WHERE age > 20
	GROUP BY department_id;
	
	
-- ç»Ÿè®¡æ¯ä¸ªå­¦ç”Ÿæ˜¯å¦æœ‰æˆç»©ï¼ˆé NULLï¼‰çš„è¯¾ç¨‹æ•°é‡	
	SELECT student_id, COUNT(score) AS scored_course_count
	FROM enrollments
	GROUP BY student_id;
	
	
-- ç»Ÿè®¡å„è¯¾ç¨‹åˆ†æ•°å¤§äºç­‰äº80çš„å­¦ç”Ÿäººæ•°	
	SELECT course_id, COUNT(*) AS high_score_count
	FROM enrollments
	WHERE score >= 80
	GROUP BY course_id;
	
	
-- ç»Ÿè®¡æ¯ä¸ªè¯¾ç¨‹æ˜¯å¦æœ‰ NULL æˆç»©è®°å½•	
	SELECT course_id, SUM(CASE WHEN score IS NULL THEN 1 ELSE 0 END) AS null_score_count
	FROM enrollments
	GROUP BY course_id;
	
-- ç»Ÿè®¡æ¯ä¸ªç³»ä¸­å­¦ç”Ÿå§“åé•¿åº¦è¶…è¿‡4çš„æ•°é‡	
	SELECT department_id, COUNT(*) AS count
	FROM students
	WHERE LENGTH(name) > 4
	GROUP BY department_id;
	
-- æ‰¾å‡ºæ¯ä¸ªç³»å¹³å‡å¹´é¾„å¤§äº21çš„ç³»	
	SELECT department_id, AVG(age) AS avg_age
	FROM students
	WHERE age IS NOT NULL
	GROUP BY department_id
	HAVING AVG(age) > 21;
	
	
-- æ‰¾å‡ºæœ‰è¶…è¿‡ 1 ä¸ªå­¦ç”Ÿå‚åŠ ä¸”å¹³å‡åˆ†å¤§äº85çš„è¯¾ç¨‹	
	SELECT course_id, COUNT(*) AS count, AVG(score) AS avg_score
	FROM enrollments
	WHERE score IS NOT NULL
	GROUP BY course_id
	HAVING COUNT(*) > 1 AND AVG(score) > 85;
	
	
-- ç»Ÿè®¡æ¯ä¸ªæ€§åˆ«ä¸‹ï¼Œå§“åä¸ä¸º NULL çš„å­¦ç”Ÿå¹³å‡å¹´é¾„ï¼Œæ’é™¤å¹´é¾„ä¸º NULL	
	SELECT gender, AVG(age) AS avg_age
	FROM students
	WHERE name IS NOT NULL AND age IS NOT NULL
	GROUP BY gender;
	
	
-- ç»Ÿè®¡æ¯ä¸ªå­¦ç”Ÿçš„æ€»åˆ†ï¼Œä½†åªä¿ç•™æ€»åˆ†åœ¨ 150 åˆ° 200 ä¹‹é—´çš„è®°å½•	
	SELECT student_id, SUM(score) AS total_score
	FROM enrollments
	WHERE score IS NOT NULL
	GROUP BY student_id
	HAVING SUM(score) BETWEEN 150 AND 200;
	
	
-- æŒ‰è¯¾ç¨‹åˆ†ç»„ï¼Œè®¡ç®—å¹³å‡åˆ†ã€äººæ•°ï¼Œè¦æ±‚å¹³å‡åˆ†éç©ºä¸”ä¸å°‘äº2äºº	
	SELECT course_id, AVG(score) AS avg_score, COUNT(*) AS student_count
	FROM enrollments
	WHERE score IS NOT NULL
	GROUP BY course_id
	HAVING COUNT(*) >= 2;
	
	
-- æ‰¾å‡ºå¹³å‡å¹´é¾„æœ€å°çš„æ€§åˆ«ç»„ï¼ˆå…ˆåˆ†ç»„ï¼Œå†æ’åºå–TOP 1ï¼‰	
	SELECT gender, AVG(age) AS avg_age
	FROM students
	WHERE age IS NOT NULL
	GROUP BY gender
	ORDER BY avg_age ASC
	LIMIT 1;
	
	
-- æ‰¾å‡ºæ‰€æœ‰åˆ†æ•°ä¸ºæ•´æ•°çš„è¯¾ç¨‹åŠå…¶å¹³å‡åˆ†	
	SELECT course_id, AVG(score) AS avg_score
	FROM enrollments
	WHERE score IS NOT NULL AND score = FLOOR(score)
	GROUP BY course_id;
	
	
-- ç»Ÿè®¡æ¯ä¸ªå­¦ç”Ÿçš„æ€»åˆ†å¹¶è®¡ç®—å…¶åˆ†æ•°å¹³æ–¹å’Œï¼ˆç»ƒ POWERï¼‰	
	SELECT student_id, SUM(score) AS total_score, SUM(POWER(score, 2)) AS sum_square
	FROM enrollments
	WHERE score IS NOT NULL
	GROUP BY student_id;
	
	
-- æ‰¾å‡ºåå­—åŒ…å«å­—æ¯ â€œaâ€ çš„å­¦ç”Ÿï¼ŒæŒ‰ç³»åˆ†ç»„ç»Ÿè®¡äººæ•°	
	SELECT department_id, COUNT(*) AS count
	FROM students
	WHERE name IS NOT NULL AND name LIKE '%a%'
	GROUP BY department_id;
	
	
-- æ‰¾å‡ºæ‰€æœ‰è¯¾ç¨‹ä¸­ï¼Œæˆç»©æ³¢åŠ¨è¶…è¿‡20ï¼ˆmax - min > 20ï¼‰çš„è¯¾ç¨‹	
	SELECT course_id, MAX(score) - MIN(score) AS score_range
	FROM enrollments
	WHERE score IS NOT NULL
	GROUP BY course_id
	HAVING MAX(score) - MIN(score) > 20;
	
	
-- Inner Join å­¦ç”Ÿå’Œé€‰è¯¾ä¿¡æ¯	
	
/*EN: List all students and the courses they enrolled in	
CN: åˆ—å‡ºæ‰€æœ‰å­¦ç”ŸåŠå…¶æ‰€é€‰çš„è¯¾ç¨‹åç§°	
	*/
	
	SELECT s.name AS student_name, c.course_name
	FROM students s
	INNER JOIN enrollments e ON s.student_id = e.student_id
	INNER JOIN courses c ON e.course_id = c.course_id;
	
	
	
	
--Join with Department å­¦ç”ŸåŠå…¶æ‰€å±ç³»	
	
	
/*EN: Show student names and their department names	
CN: æ˜¾ç¤ºå­¦ç”Ÿå§“ååŠå…¶æ‰€å±ç³»åç§°	
	*/
	
	SELECT s.name AS student_name, d.department_name
	FROM students s
	JOIN departments d ON s.department_id = d.department_id;
	
	
	
-- Join Course & Teacher è¯¾ç¨‹ä¸æˆè¯¾æ•™å¸ˆ	
	
	
/*EN: Show each course and the teacher who teaches it	
CN: æ˜¾ç¤ºæ¯é—¨è¯¾ç¨‹åŠå…¶æˆè¯¾æ•™å¸ˆ	*/
	
	
	SELECT c.course_name, t.name AS teacher_name
	FROM courses c
	JOIN teachers t ON c.teacher_id = t.teacher_id;
	
	
	
-- ç»¼åˆå¤šè¡¨ JOINï¼šå­¦ç”Ÿã€è¯¾ç¨‹ã€æˆç»©	
	
	
/*EN: List student name, course name, and score	
CN: åˆ—å‡ºå­¦ç”Ÿå§“åã€è¯¾ç¨‹åç§°ä¸æˆç»©	*/
	
	
	SELECT s.name AS student_name, c.course_name, e.score
	FROM students s
	JOIN enrollments e ON s.student_id = e.student_id
	JOIN courses c ON e.course_id = c.course_id;
	
	
	
-- JOIN with æ¡ä»¶è¿‡æ»¤	
	
	
/*EN: Find all students who scored below 70	
CN: æŸ¥æ‰¾æˆç»©ä½äº 70 åˆ†çš„å­¦ç”Ÿ	*/
	
	
	SELECT s.name AS student_name, c.course_name, e.score
	FROM students s
	JOIN enrollments e ON s.student_id = e.student_id
	JOIN courses c ON e.course_id = c.course_id
	WHERE e.score < 70;
	
	
	
-- LEFT JOINï¼šæ˜¾ç¤ºæ‰€æœ‰è¯¾ç¨‹åŠæ˜¯å¦è¢«é€‰	
	
	
/*EN: Show all courses and the students who enrolled (if any)	
CN: æ˜¾ç¤ºæ‰€æœ‰è¯¾ç¨‹åŠå…¶æ˜¯å¦æœ‰å­¦ç”Ÿé€‰ä¿®	*/
	
	
	SELECT c.course_name, s.name AS student_name
	FROM courses c
	LEFT JOIN enrollments e ON c.course_id = e.course_id
	LEFT JOIN students s ON e.student_id = s.student_id;
	
	
-- FULL OUTER JOINï¼ˆSQLiteä¸æ”¯æŒï¼Œç†è®ºç»ƒä¹ ï¼‰	
	
	
/*EN: Show all students and all courses, even if thereâ€™s no enrollment	
CN: æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿä¸æ‰€æœ‰è¯¾ç¨‹ï¼Œå³ä½¿æ²¡æœ‰é€‰è¯¾è®°å½•	
	*/
	
--ï¼ˆæ³¨æ„ï¼šSQLite ä¸æ”¯æŒ FULL OUTER JOINï¼Œå¯ä»¥ç”¨ UNION ä»£æ›¿ï¼‰	
	
	
	
	
